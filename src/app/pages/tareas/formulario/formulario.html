
<div class="contenedor">

  <h2>Nueva Tarea</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()">

    <!-- TÍTULO -->
    <label>Título</label>
    <input
      type="text"
      formControlName="titulo"
      placeholder="Escribe un título..."
    />
    <p class="error" *ngIf="form.controls['titulo'].touched && form.controls['titulo'].invalid">
      <span *ngIf="form.controls['titulo'].errors?.['required']">El título es obligatorio.</span>
      <span *ngIf="form.controls['titulo'].errors?.['minlength']">Mínimo 3 caracteres.</span>
    </p>

    <!-- DESCRIPCIÓN -->
    <label>Descripción</label>
    <textarea
      formControlName="descripcion"
      placeholder="Descripción corta..."
    ></textarea>
    <p class="error" *ngIf="form.controls['descripcion'].touched && form.controls['descripcion'].invalid">
      <span *ngIf="form.controls['descripcion'].errors?.['maxlength']">Máximo 500 caracteres.</span>
    </p>

    <!-- CATEGORÍA -->
    <label>Categoría</label>
    <select formControlName="categoriaId">
      <option value="" disabled selected>Seleccione una categoría...</option>
      <option *ngFor="let cat of categorias" [value]="cat.id">{{ cat.nombre }}</option>
    </select>
    <p class="error" *ngIf="form.controls['categoriaId'].touched && form.controls['categoriaId'].invalid">
      La categoría es obligatoria.
    </p>

    <!-- FECHA -->
    <label>Fecha</label>
    <input type="date" formControlName="fecha" />
    <p class="error" *ngIf="form.controls['fecha'].touched && form.controls['fecha'].invalid">
      La fecha es obligatoria.
    </p>

    <!-- COMPLETADA -->
    <label class="checkbox">
      <input type="checkbox" formControlName="completada" />
      Marcar como completada
    </label>

    <!-- BOTONES -->
    <div class="botones">
      <button type="submit" [disabled]="form.invalid">Guardar</button>
      <button type="button" class="cancelar" (click)="cancelar()">Cancelar</button>
    </div>

  </form>

</div>
